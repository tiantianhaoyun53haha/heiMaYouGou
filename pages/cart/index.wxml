<!--pages/cart/index.wxml-->

<view class="revice_wrap">
    <view wx:if="{{!(address&&address.all)}}" class="revice_btn_wrap">
        <!-- // plain表示按钮是否镂空，按钮是否透明 -->
        <!-- primary表示绿色 -->
        <button bindtap="handleChooseAddress" plain type="primary">添加收货地址</button>
    </view>
    <view wx:else>{{address.all}}</view>
</view>

<!-- 商品部分 -->
<view class="cart_main">
    <view class="cart_main_title">购物车</view>
    <view class="cart_main_content">
        <view class="cart_item"
         wx:for="{{cart}}"
	      wx:for-index="key"
	      wx:for-item="value"
	      wx:key="value"
        >
            <!-- 复选框  -->
            <view class="cart_chk_wrap">
                <checkbox-group  bindchange="handleCartCheck" data-id="{{value.goods_id}}" >
                    <checkbox  checked="{{value.checked}}"></checkbox>
                </checkbox-group>
            </view>
            <!-- 商品的图片 -->
            <view class="cart_img_wrap">
                     <image mode="widthFix" src="{{value.goods_small_logo}}" ></image>
            </view>
            <!-- 商品的信息 -->
            <view class="cart_info">
                <view class="goods_name">{{value.goods_name}}</view>
                <view class="goods_price_wrap">
                    <view class="goods_price">￥{{value.goods_price}}</view>
                    <view class="cart_tool">
                        <text class="cart_num_edit" bindtap="handleCartNumEdit" 
                        data-operation="{{-1}}" data-id="{{value.goods_id}}">-</text>
                        <text class="cart_num">{{value.num}}</text>
                        <text class="cart_num_edit"  bindtap="handleCartNumEdit" 
                        data-operation="{{1}}" data-id="{{value.goods_id}}">+</text>
                    </view>
                </view>
            </view>
        </view>

    </view>
</view>


<!-- 底部工具栏 -->
<view class="btm_tool">
        <view class="all_check_wrap">
          <checkbox-group bindchange="handleCartAllCheck">
            <checkbox color="red" checked="{{isAllChecked}}">全选</checkbox>
          </checkbox-group>
        </view>
        <view class="total_price_wrap">
          <view class="total_price"> 合计: <text>￥{{totalPrice}}</text> </view>
          <view class="freight_tips">包含运费</view>
        </view>
        <view class="cart_pay" bindtap="handlePay" >结算({{totalNum}})</view>
      </view>