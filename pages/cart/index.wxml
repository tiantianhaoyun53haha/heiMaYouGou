<!--pages/cart/index.wxml-->

<view class="revice_wrap">
    <view wx:if="{{!(address&&address.all)}}" class="revice_btn_wrap">
        <!-- // plain表示按钮是否镂空，按钮是否透明 -->
        <!-- primary表示绿色 -->
        <button bindtap="handleChooseAddress" plain type="primary">添加收货地址</button>
    </view>
    <view wx:else >{{address.all}}</view>
</view>

<!-- 商品部分 -->
<view></view>
<view class="cart_main">
    <view class="cart_main_title">购物车</view>
    <view class="cart_main_content">
      <block wx:if="{{hasGoods}}">
        <view class="cart_item" wx:for="{{cart}}" 
        wx:for-index="key" wx:for-item="value" wx:key="value">
          <!-- 复选框  -->
          <view class="cart_chk_wrap">
            <checkbox-group bindchange="handleCartCheck" data-id="{{value.goods_id}}">
              <checkbox color="red" checked="{{value.checked}}"></checkbox>
            </checkbox-group>
          </view>
          <!-- 商品的图片 -->
          <view class="cart_img_wrap">
            <image mode="widthFix" src="{{value.goods_small_logo}}"></image>
          </view>
          <!-- 商品的信息 -->
          <view class="cart_info">
            <view class="goods_name">{{value.goods_name}}</view>
            <view class="goods_price_wrap">
              <view class="goods_price">￥{{value.goods_price}}</view>
              <view class="cart_tool">
                <text class="cart_num_edit" bindtap="handleCartNumEdit" data-operation="{{-1}}"
                  data-id="{{value.goods_id}}">-</text>
                <text class="cart_num">{{value.num}}</text>
                <text class="cart_num_edit" bindtap="handleCartNumEdit" data-operation="{{1}}"
                  data-id="{{value.goods_id}}">+</text>
              </view>
            </view>
          </view>
        </view>
      </block>
      <block wx:else>
        <view class="empty_img_wrap">
          <image mode="widthFix"
            src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1564833064883&di=751ab54dae1a6e0f71780fe3ebc935f7&imgtype=0&src=http%3A%2F%2Fhbimg.b0.upaiyun.com%2Fe1b1467beea0a9c7d6a56b32bac6d7e5dcd914f7c3e6-YTwUd6_fw658">
          </image>
        </view>
      </block>
    </view>
  </view>